<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Tue Mar 08 19:08:10 CST 2016 -->
<title>CFGSimplifier</title>
<meta name="date" content="2016-03-08">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CFGSimplifier";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CFGSimplifier.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../sketch/compiler/parallelEncoder/CFGforPloop.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../sketch/compiler/parallelEncoder/ExtractPreParallelSection.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?sketch/compiler/parallelEncoder/CFGSimplifier.html" target="_top">Frames</a></li>
<li><a href="CFGSimplifier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">sketch.compiler.parallelEncoder</div>
<h2 title="Class CFGSimplifier" class="title">Class CFGSimplifier</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>sketch.compiler.parallelEncoder.CFGSimplifier</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CFGSimplifier</span>
extends java.lang.Object</pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#changeSucc-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-">changeSucc</a></span>(<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;n,
          <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;oldS,
          <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;newS)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#cleanLocalState-sketch.compiler.controlflow.CFG-java.util.Map-sketch.compiler.ast.core.stmts.StmtVarDecl-">cleanLocalState</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
               java.util.Map&lt;java.lang.String,<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
               <a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&nbsp;pidVar)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#createClusters-sketch.compiler.controlflow.CFG-java.util.List-">createClusters</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
              java.util.List&lt;sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&gt;&nbsp;clusters)</code>
<div class="block">This routine creates clusters from the CFG by the following rules.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#eliminateConsecutiveIfs-sketch.compiler.ast.core.stmts.Statement-">eliminateConsecutiveIfs</a></span>(<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;s)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#mergeConsecutiveLocals-sketch.compiler.controlflow.CFG-">mergeConsecutiveLocals</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#processCluster-sketch.compiler.parallelEncoder.CFGSimplifier.Cluster-sketch.compiler.ast.core.exprs.ExprVar-">processCluster</a></span>(sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&nbsp;c,
              <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;ind)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#simplifyAcrossBranches-sketch.compiler.controlflow.CFG-">simplifyAcrossBranches</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/CFGSimplifier.html#stmtForNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.parallelEncoder.CFGSimplifier.Cluster-sketch.compiler.ast.core.exprs.ExprVar-java.util.List-java.util.Set-">stmtForNode</a></span>(<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;n,
           <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;pred,
           sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&nbsp;c,
           <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;ind,
           java.util.List&lt;<a href="../../../sketch/compiler/controlflow/CFGNode.EdgePair.html" title="class in sketch.compiler.controlflow">CFGNode.EdgePair</a>&gt;&nbsp;lst,
           java.util.Set&lt;<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&gt;&nbsp;visited)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="cleanLocalState-sketch.compiler.controlflow.CFG-java.util.Map-sketch.compiler.ast.core.stmts.StmtVarDecl-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanLocalState</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cleanLocalState(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
                           java.util.Map&lt;java.lang.String,<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                           <a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&nbsp;pidVar)</pre>
</li>
</ul>
<a name="createClusters-sketch.compiler.controlflow.CFG-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createClusters</h4>
<pre>public&nbsp;int&nbsp;createClusters(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
                          java.util.List&lt;sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&gt;&nbsp;clusters)</pre>
<div class="block">This routine creates clusters from the CFG by the following rules.
 The cluster gets started by putting the root in the cstack.
 The cstack is the stack for the current cluster.

 Each entry in the Cstack has a bit that says whether the path to it has been tainted or not.
 The tainted label is set by the following rules:
 <li> If the parent is global, all its children are tainted.
 <li> If the parent is tainted, all its children are tainted.

 Because a cluster can have only a single entry point, nodes with multiple parents can not be
 added to the cluster until we know all its parents belong to the cluster.
 When you reach a node with multiple parents, you check if all parents are in a cluster. If not,
 you put it in a waitlist with one of the following tags:
 <li> global: The node is global. If it is reached by a tainted parent, it should be removed from the
 waitlist and added to the outer stack and marked as visited.
 <li> tainted: One of its parents is tainted. When all the parents have been visited, it should
 be added to the cstack as tainted.
 <li> local: None of its parents are tainted. When all parents have been visited, it should be added
 to the cstack as untainted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cfg</code> - </dd>
<dd><code>clusters</code> - </dd>
</dl>
</li>
</ul>
<a name="stmtForNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.parallelEncoder.CFGSimplifier.Cluster-sketch.compiler.ast.core.exprs.ExprVar-java.util.List-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stmtForNode</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;stmtForNode(<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;n,
                             <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;pred,
                             sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&nbsp;c,
                             <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;ind,
                             java.util.List&lt;<a href="../../../sketch/compiler/controlflow/CFGNode.EdgePair.html" title="class in sketch.compiler.controlflow">CFGNode.EdgePair</a>&gt;&nbsp;lst,
                             java.util.Set&lt;<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&gt;&nbsp;visited)</pre>
</li>
</ul>
<a name="eliminateConsecutiveIfs-sketch.compiler.ast.core.stmts.Statement-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eliminateConsecutiveIfs</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;eliminateConsecutiveIfs(<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;s)</pre>
</li>
</ul>
<a name="processCluster-sketch.compiler.parallelEncoder.CFGSimplifier.Cluster-sketch.compiler.ast.core.exprs.ExprVar-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processCluster</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;processCluster(sketch.compiler.parallelEncoder.CFGSimplifier.Cluster&nbsp;c,
                              <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;ind)</pre>
</li>
</ul>
<a name="simplifyAcrossBranches-sketch.compiler.controlflow.CFG-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>simplifyAcrossBranches</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;simplifyAcrossBranches(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg)</pre>
</li>
</ul>
<a name="changeSucc-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-sketch.compiler.controlflow.CFGNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeSucc</h4>
<pre>public&nbsp;void&nbsp;changeSucc(<a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;n,
                       <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;oldS,
                       <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;newS)</pre>
</li>
</ul>
<a name="mergeConsecutiveLocals-sketch.compiler.controlflow.CFG-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mergeConsecutiveLocals</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;mergeConsecutiveLocals(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CFGSimplifier.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../sketch/compiler/parallelEncoder/CFGforPloop.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../sketch/compiler/parallelEncoder/ExtractPreParallelSection.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?sketch/compiler/parallelEncoder/CFGSimplifier.html" target="_top">Frames</a></li>
<li><a href="CFGSimplifier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
