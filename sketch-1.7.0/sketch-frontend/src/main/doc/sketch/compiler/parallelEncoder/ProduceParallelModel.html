<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Tue Mar 08 19:08:10 CST 2016 -->
<title>ProduceParallelModel</title>
<meta name="date" content="2016-03-08">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ProduceParallelModel";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ProduceParallelModel.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../sketch/compiler/parallelEncoder/ParallelPreprocessor.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.EliminateLockUnlock.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?sketch/compiler/parallelEncoder/ProduceParallelModel.html" target="_top">Frames</a></li>
<li><a href="ProduceParallelModel.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.sketch.compiler.ast.core.FEReplacer">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">sketch.compiler.parallelEncoder</div>
<h2 title="Class ProduceParallelModel" class="title">Class ProduceParallelModel</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../sketch/compiler/ast/core/FEReplacer.html" title="class in sketch.compiler.ast.core">sketch.compiler.ast.core.FEReplacer</a></li>
<li>
<ul class="inheritance">
<li>sketch.compiler.parallelEncoder.ProduceParallelModel</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../sketch/compiler/ast/core/FEVisitor.html" title="interface in sketch.compiler.ast.core">FEVisitor</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">ProduceParallelModel</span>
extends <a href="../../../sketch/compiler/ast/core/FEReplacer.html" title="class in sketch.compiler.ast.core">FEReplacer</a></pre>
<div class="block">This class produces a parallel model of a sketch.
 It takes a sketch containing parallel loops, and replaces it with a sketch
 that has as input a schedule that defines how the threads are going to interleave.


 Preconditions:
 Variable names should be unique (this is accomplished by the preprocessing pass).
 Function should have only a single ploop.
 Ploop can not be inside any other loop.
 All functions have bee inlined.
 The ploop can not have return statements.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.EliminateLockUnlock.html" title="class in sketch.compiler.parallelEncoder">ProduceParallelModel.EliminateLockUnlock</a></span></code>
<div class="block">Performs the following replacements:
 lock(i) becomes:
 if(locks[i] == 0 || locks[i] == threadID+1){
                locks[i] = threadID+1;
 }else{
                //lock is taken by someone else.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.FindLocals.html" title="class in sketch.compiler.parallelEncoder">ProduceParallelModel.FindLocals</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.sketch.compiler.ast.core.FEReplacer">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;sketch.compiler.ast.core.<a href="../../../sketch/compiler/ast/core/FEReplacer.html" title="class in sketch.compiler.ast.core">FEReplacer</a></h3>
<code><a href="../../../sketch/compiler/ast/core/FEReplacer.html#fields">fields</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#ProduceParallelModel-sketch.compiler.ast.core.TempVarGen-int-int-">ProduceParallelModel</a></span>(<a href="../../../sketch/compiler/ast/core/TempVarGen.html" title="class in sketch.compiler.ast.core">TempVarGen</a>&nbsp;varGen,
                    int&nbsp;schedLen,
                    int&nbsp;locklen)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#buildMainFunction-java.util.Set-java.util.Set-sketch.compiler.ast.core.stmts.StmtVarDecl-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.ast.core.stmts.Statement-java.lang.String-java.lang.String-java.util.List-java.util.List-sketch.compiler.ast.core.typs.Type-java.lang.String-java.lang.String-">buildMainFunction</a></span>(java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;oriGlobals,
                 java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                 <a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&nbsp;loopIdx,
                 <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads,
                 <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;prepar,
                 java.lang.String&nbsp;funName,
                 java.lang.String&nbsp;oriName,
                 java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;parList,
                 java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;oldPar,
                 <a href="../../../sketch/compiler/ast/core/typs/Type.html" title="class in sketch.compiler.ast.core.typs">Type</a>&nbsp;sType,
                 java.lang.String&nbsp;pcname,
                 java.lang.String&nbsp;specName)</code>
<div class="block">T Fun(inputs){
         declare globals;
   prepar;
   return restFun(globals, defaultLocals, sched, 0);

 }</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#buildParsFromDecls-java.util.Iterator-java.util.List-">buildParsFromDecls</a></span>(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                  java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;params)</code>
<div class="block">Creates one parameter for each variable declaration in the input list.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#condForNode-sketch.compiler.controlflow.CFG-sketch.compiler.controlflow.CFGNode-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.ast.core.exprs.ExprVar-sketch.compiler.parallelEncoder.VarSetReplacer-sketch.compiler.parallelEncoder.ProduceParallelModel.EliminateLockUnlock-java.util.List-">condForNode</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
           <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;node,
           <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
           <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;pcVar,
           <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl,
           <a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.EliminateLockUnlock.html" title="class in sketch.compiler.parallelEncoder">ProduceParallelModel.EliminateLockUnlock</a>&nbsp;luelim,
           java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&gt;&nbsp;conditCF)</code>
<div class="block">Produces an AST node of the form:
                if(pc[idx] == 0){
                cfg[0] ( globals -> globals'[i], locals -> locals'[i])
                pc_p[idx][idx] = next;
        }
    Or
        if(locals[i].pc != ENDPC){
        done = false;
      }else{
        invalidSchedule[i] = 1;
      }</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#constructRestFunction-sketch.compiler.controlflow.CFG-sketch.compiler.ast.core.stmts.Statement-sketch.compiler.ast.core.stmts.Statement-sketch.compiler.ast.promela.stmts.StmtFork-java.util.Set-java.util.Set-sketch.compiler.ast.core.Function-">constructRestFunction</a></span>(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;parcfg,
                     <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;postpar,
                     <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;prepar,
                     <a href="../../../sketch/compiler/ast/promela/stmts/StmtFork.html" title="class in sketch.compiler.ast.promela.stmts">StmtFork</a>&nbsp;ploop,
                     java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;globals,
                     java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                     <a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;fun)</code>
<div class="block">This method produces a function with the following skeleton:
 T restFun(globals, [NT]locals, int[NSTEPS] sched, int t){
    forall i<NT : globals'[i] = globals;
    forall i<NT : locals'[i] = locals;
    bool done = true;
    bit[NTHREADS] invalidSchedule;
    for(int i=0; i<NT; ++i){
        if(locals[i].pc == 0){
                cfg[0] ( globals -> globals'[i], locals -> locals'[i][i])
        }
      ...</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#declArrFromScalars-java.util.Iterator-java.util.List-sketch.compiler.ast.core.exprs.Expression-">declArrFromScalars</a></span>(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;original,
                  java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;pDecl,
                  <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads)</code>
<div class="block">The input collection contains variable declarations, and the output collection contains variable' declarations such that
 if T X; is a declaration in the original list, T[NTHREADS] X_p will be a declaration in the output list.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#indexedAssignments-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-java.util.List-">indexedAssignments</a></span>(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                  <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                  java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&gt;&nbsp;pAssign)</code>
<div class="block">Get as input a collection of variables, and produce as et of assignemtns of the form:

 X_p[idx] = X; where X is a variable in the vars collection.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#populateVarReplacer-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.parallelEncoder.VarSetReplacer-">populateVarReplacer</a></span>(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                   <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                   <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl)</code>
<div class="block">Populates the VarSetReplacer with replacement rules of the form:
 X -> X_p[idx].</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#populateVarReplacerLocal-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.parallelEncoder.VarSetReplacer-">populateVarReplacerLocal</a></span>(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                        <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                        <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl)</code>
<div class="block">Populates the VarSetReplacer with replacement rules of the form:
 X -> X_p[idx][idx].</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#produceParallelModel-sketch.compiler.ast.core.Function-">produceParallelModel</a></span>(<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;fun)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#produceRecursiveCalls-sketch.compiler.ast.core.exprs.Expression-java.util.List-java.lang.String-">produceRecursiveCalls</a></span>(<a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads,
                     java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;parList,
                     java.lang.String&nbsp;funName)</code>
<div class="block">This function produces the following code:
        {
      T[NT] out;
      bit noDeadlock = 0;
      for(int i=0; i<NT; ++i){
          if(invalidSchedule[i]){
                out[i] = 1;
          }else{
                out[i] = rest(globals'[i], locals'[i], sched, t+1);
                noDeadlock = 1;
        }
      }
      assert noDeadlock : "There is a possible deadlock in the code.";
      assert t < NSTEPS
        return out[sched[t]];
        }</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#vectorizeLocals-java.util.Set-sketch.compiler.ast.core.exprs.Expression-">vectorizeLocals</a></span>(java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
               <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.html#visitFunction-sketch.compiler.ast.core.Function-">visitFunction</a></span>(<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;func)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.sketch.compiler.ast.core.FEReplacer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;sketch.compiler.ast.core.<a href="../../../sketch/compiler/ast/core/FEReplacer.html" title="class in sketch.compiler.ast.core">FEReplacer</a></h3>
<code><a href="../../../sketch/compiler/ast/core/FEReplacer.html#getNres--">getNres</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#setNres-sketch.compiler.ast.core.NameResolver-">setNres</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitCudaBlockDim-sketch.compiler.ast.cuda.exprs.CudaBlockDim-">visitCudaBlockDim</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitCudaInstrumentCall-sketch.compiler.ast.cuda.exprs.CudaInstrumentCall-">visitCudaInstrumentCall</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitCudaSyncthreads-sketch.compiler.ast.cuda.stmts.CudaSyncthreads-">visitCudaSyncthreads</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitCudaThreadIdx-sketch.compiler.ast.cuda.exprs.CudaThreadIdx-">visitCudaThreadIdx</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprADTHole-sketch.compiler.ast.core.exprs.ExprADTHole-">visitExprADTHole</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprAlt-sketch.compiler.ast.core.exprs.regens.ExprAlt-">visitExprAlt</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprArrayInit-sketch.compiler.ast.core.exprs.ExprArrayInit-">visitExprArrayInit</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprArrayRange-sketch.compiler.ast.core.exprs.ExprArrayRange-">visitExprArrayRange</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprBinary-sketch.compiler.ast.core.exprs.ExprBinary-">visitExprBinary</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprChoiceBinary-sketch.compiler.ast.core.exprs.regens.ExprChoiceBinary-">visitExprChoiceBinary</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprChoiceSelect-sketch.compiler.ast.core.exprs.regens.ExprChoiceSelect-">visitExprChoiceSelect</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprChoiceUnary-sketch.compiler.ast.core.exprs.regens.ExprChoiceUnary-">visitExprChoiceUnary</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprConstChar-sketch.compiler.ast.core.exprs.ExprConstChar-">visitExprConstChar</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprConstFloat-sketch.compiler.ast.core.exprs.ExprConstFloat-">visitExprConstFloat</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprConstInt-sketch.compiler.ast.core.exprs.ExprConstInt-">visitExprConstInt</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprField-sketch.compiler.ast.core.exprs.ExprField-">visitExprField</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprFieldsListMacro-sketch.compiler.ast.core.exprs.ExprFieldsListMacro-">visitExprFieldsListMacro</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprFunCall-sketch.compiler.ast.core.exprs.ExprFunCall-">visitExprFunCall</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprLambda-sketch.compiler.ast.core.exprs.ExprLambda-">visitExprLambda</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprLiteral-sketch.compiler.ast.core.exprs.ExprLiteral-">visitExprLiteral</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprLocalVariables-sketch.compiler.ast.core.exprs.ExprLocalVariables-">visitExprLocalVariables</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprNamedParam-sketch.compiler.ast.core.exprs.ExprNamedParam-">visitExprNamedParam</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprNew-sketch.compiler.ast.core.exprs.ExprNew-">visitExprNew</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprNullPtr-sketch.compiler.ast.core.exprs.ExprNullPtr-">visitExprNullPtr</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprParen-sketch.compiler.ast.core.exprs.regens.ExprParen-">visitExprParen</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprRange-sketch.compiler.ast.cuda.exprs.ExprRange-">visitExprRange</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprRegen-sketch.compiler.ast.core.exprs.regens.ExprRegen-">visitExprRegen</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprSpecialStar-sketch.compiler.ast.core.exprs.ExprSpecialStar-">visitExprSpecialStar</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprStar-sketch.compiler.ast.core.exprs.ExprStar-">visitExprStar</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprTernary-sketch.compiler.ast.core.exprs.ExprTernary-">visitExprTernary</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprTuple-sketch.compiler.ast.core.exprs.ExprTuple-">visitExprTuple</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprTupleAccess-sketch.compiler.ast.core.exprs.ExprTupleAccess-">visitExprTupleAccess</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprType-sketch.compiler.ast.core.exprs.ExprType-">visitExprType</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprTypeCast-sketch.compiler.ast.core.exprs.ExprTypeCast-">visitExprTypeCast</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprUnary-sketch.compiler.ast.core.exprs.ExprUnary-">visitExprUnary</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitExprVar-sketch.compiler.ast.core.exprs.ExprVar-">visitExprVar</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitFieldDecl-sketch.compiler.ast.core.FieldDecl-">visitFieldDecl</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitOther-sketch.compiler.ast.core.FENode-">visitOther</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitPackage-sketch.compiler.ast.core.Package-">visitPackage</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitParameter-sketch.compiler.ast.core.Parameter-">visitParameter</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitProgram-sketch.compiler.ast.core.Program-">visitProgram</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitSpmdBarrier-sketch.compiler.ast.spmd.stmts.SpmdBarrier-">visitSpmdBarrier</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitSpmdNProc-sketch.compiler.ast.spmd.exprs.SpmdNProc-">visitSpmdNProc</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitSpmdPid-sketch.compiler.ast.spmd.exprs.SpmdPid-">visitSpmdPid</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStatementsAsBlock-sketch.compiler.ast.core.stmts.Statement...-">visitStatementsAsBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStatementsAsBlock-java.util.Vector-">visitStatementsAsBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtAssert-sketch.compiler.ast.core.stmts.StmtAssert-">visitStmtAssert</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtAssign-sketch.compiler.ast.core.stmts.StmtAssign-">visitStmtAssign</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtAssume-sketch.compiler.ast.core.stmts.StmtAssume-">visitStmtAssume</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtAtomicBlock-sketch.compiler.ast.core.stmts.StmtAtomicBlock-">visitStmtAtomicBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtBlock-sketch.compiler.ast.core.stmts.StmtBlock-">visitStmtBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtBreak-sketch.compiler.ast.core.stmts.StmtBreak-">visitStmtBreak</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtContinue-sketch.compiler.ast.core.stmts.StmtContinue-">visitStmtContinue</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtDoWhile-sketch.compiler.ast.core.stmts.StmtDoWhile-">visitStmtDoWhile</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtEmpty-sketch.compiler.ast.core.stmts.StmtEmpty-">visitStmtEmpty</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtExpr-sketch.compiler.ast.core.stmts.StmtExpr-">visitStmtExpr</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtFor-sketch.compiler.ast.core.stmts.StmtFor-">visitStmtFor</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtFork-sketch.compiler.ast.promela.stmts.StmtFork-">visitStmtFork</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtFunDecl-sketch.compiler.ast.core.stmts.StmtFunDecl-">visitStmtFunDecl</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtIfThen-sketch.compiler.ast.core.stmts.StmtIfThen-">visitStmtIfThen</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtImplicitVarDecl-sketch.compiler.ast.core.stmts.StmtImplicitVarDecl-">visitStmtImplicitVarDecl</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtInsertBlock-sketch.compiler.ast.core.stmts.StmtInsertBlock-">visitStmtInsertBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtJoin-sketch.compiler.ast.promela.stmts.StmtJoin-">visitStmtJoin</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtLoop-sketch.compiler.ast.core.stmts.StmtLoop-">visitStmtLoop</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtMinimize-sketch.compiler.ast.core.stmts.StmtMinimize-">visitStmtMinimize</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtMinLoop-sketch.compiler.ast.core.stmts.StmtMinLoop-">visitStmtMinLoop</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtParfor-sketch.compiler.ast.cuda.stmts.StmtParfor-">visitStmtParfor</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtReorderBlock-sketch.compiler.ast.core.stmts.StmtReorderBlock-">visitStmtReorderBlock</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtReturn-sketch.compiler.ast.core.stmts.StmtReturn-">visitStmtReturn</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtSpmdfork-sketch.compiler.ast.spmd.stmts.StmtSpmdfork-">visitStmtSpmdfork</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtSwitch-sketch.compiler.ast.core.stmts.StmtSwitch-">visitStmtSwitch</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtVarDecl-sketch.compiler.ast.core.stmts.StmtVarDecl-">visitStmtVarDecl</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStmtWhile-sketch.compiler.ast.core.stmts.StmtWhile-">visitStmtWhile</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitStructDef-sketch.compiler.ast.core.typs.StructDef-">visitStructDef</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitType-sketch.compiler.ast.core.typs.Type-">visitType</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitTypeArray-sketch.compiler.ast.core.typs.TypeArray-">visitTypeArray</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitTypePrimitive-sketch.compiler.ast.core.typs.TypePrimitive-">visitTypePrimitive</a>, <a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitTypeStructRef-sketch.compiler.ast.core.typs.TypeStructRef-">visitTypeStructRef</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ProduceParallelModel-sketch.compiler.ast.core.TempVarGen-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ProduceParallelModel</h4>
<pre>public&nbsp;ProduceParallelModel(<a href="../../../sketch/compiler/ast/core/TempVarGen.html" title="class in sketch.compiler.ast.core">TempVarGen</a>&nbsp;varGen,
                            int&nbsp;schedLen,
                            int&nbsp;locklen)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="constructRestFunction-sketch.compiler.controlflow.CFG-sketch.compiler.ast.core.stmts.Statement-sketch.compiler.ast.core.stmts.Statement-sketch.compiler.ast.promela.stmts.StmtFork-java.util.Set-java.util.Set-sketch.compiler.ast.core.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>constructRestFunction</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;constructRestFunction(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;parcfg,
                                      <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;postpar,
                                      <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;prepar,
                                      <a href="../../../sketch/compiler/ast/promela/stmts/StmtFork.html" title="class in sketch.compiler.ast.promela.stmts">StmtFork</a>&nbsp;ploop,
                                      java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;globals,
                                      java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                                      <a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;fun)</pre>
<div class="block">This method produces a function with the following skeleton:
 T restFun(globals, [NT]locals, int[NSTEPS] sched, int t){
    forall i<NT : globals'[i] = globals;
    forall i<NT : locals'[i] = locals;
    bool done = true;
    bit[NTHREADS] invalidSchedule;
    for(int i=0; i<NT; ++i){
        if(locals[i].pc == 0){
                cfg[0] ( globals -> globals'[i], locals -> locals'[i][i])
        }
      ...
      if(locals[i].pc == ENDPC-1){
        cfg[ENDPC-1] ( globals -> globals'[i], locals -> locals'[i][i])
      }
      if(locals[i].pc != ENDPC){
        done = false;
      }else{
        invalidSchedule[i] = 1;
      }
    }

    if(done){
        return postpar;
    }else{

      assert t < sched.length : "You need to inline more";
      T[NT] out;
      bit noDeadlock = 0;
      for(int i=0; i<NT; ++i){
          if(invalidSchedule[i]){
                out[i] = 1;
          }else{
                out[i] = rest(globals'[i], locals'[i], sched, t+1);
                noDeadlock = 1;
        }
      }

      assert noDeadlock : "Your program has deadlock";
        return out[sched[t]];

    }
 }

 T Fun(inputs, sched){
         declare globals;
   prepar;

   return restFun(globals, defaultLocals, sched, 0);

 }

 bit[NTHREADS] invalidSchedule := This variable is local to rest. It indicates whether it was legal to schedule thread i,
 or whether it should have scheduled another thread because this one is either finished or stuck on a lock.

 The global variables will include a global variable called
 int[NLOCKS] locks := for each lock, we have either threadID of the thread holding the lock or -1 if no thread is holding it.

 Thus, a statement of the form lock(i) will translate into:

 if(locks[i] == 0 || locks[i] == threadID+1){
                locks[i] = threadID+1;
 }else{
                //lock is taken by someone else. This thread shouldn't have been scheduled.
                invalidSchedule[i] = 1;
 }

 A statement of the form unlock(i) will translate into:

 assert locks[i] == threadID+1; //no unlocking locks you don't hold.
 locks[i] = 0;</div>
</li>
</ul>
<a name="buildMainFunction-java.util.Set-java.util.Set-sketch.compiler.ast.core.stmts.StmtVarDecl-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.ast.core.stmts.Statement-java.lang.String-java.lang.String-java.util.List-java.util.List-sketch.compiler.ast.core.typs.Type-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildMainFunction</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;buildMainFunction(java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;oriGlobals,
                                  java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                                  <a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&nbsp;loopIdx,
                                  <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads,
                                  <a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;prepar,
                                  java.lang.String&nbsp;funName,
                                  java.lang.String&nbsp;oriName,
                                  java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;parList,
                                  java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;oldPar,
                                  <a href="../../../sketch/compiler/ast/core/typs/Type.html" title="class in sketch.compiler.ast.core.typs">Type</a>&nbsp;sType,
                                  java.lang.String&nbsp;pcname,
                                  java.lang.String&nbsp;specName)</pre>
<div class="block">T Fun(inputs){
         declare globals;
   prepar;
   return restFun(globals, defaultLocals, sched, 0);

 }</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oriGlobals</code> - </dd>
<dd><code>locals</code> - </dd>
<dd><code>prepar</code> - </dd>
<dd><code>funName</code> - </dd>
<dd><code>parList</code> - </dd>
<dd><code>oldPar</code> - </dd>
</dl>
</li>
</ul>
<a name="produceRecursiveCalls-sketch.compiler.ast.core.exprs.Expression-java.util.List-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>produceRecursiveCalls</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&nbsp;produceRecursiveCalls(<a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads,
                                       java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;parList,
                                       java.lang.String&nbsp;funName)</pre>
<div class="block">This function produces the following code:
        {
      T[NT] out;
      bit noDeadlock = 0;
      for(int i=0; i<NT; ++i){
          if(invalidSchedule[i]){
                out[i] = 1;
          }else{
                out[i] = rest(globals'[i], locals'[i], sched, t+1);
                noDeadlock = 1;
        }
      }
      assert noDeadlock : "There is a possible deadlock in the code.";
      assert t < NSTEPS
        return out[sched[t]];
        }</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nthreads</code> - </dd>
<dd><code>parList</code> - </dd>
<dd><code>funName</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="buildParsFromDecls-java.util.Iterator-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildParsFromDecls</h4>
<pre>public&nbsp;void&nbsp;buildParsFromDecls(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                               java.util.List&lt;<a href="../../../sketch/compiler/ast/core/Parameter.html" title="class in sketch.compiler.ast.core">Parameter</a>&gt;&nbsp;params)</pre>
<div class="block">Creates one parameter for each variable declaration in the input list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>vars</code> - an iterator to the input list.</dd>
<dd><code>params</code> - output parameter.</dd>
</dl>
</li>
</ul>
<a name="populateVarReplacerLocal-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.parallelEncoder.VarSetReplacer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateVarReplacerLocal</h4>
<pre>public&nbsp;void&nbsp;populateVarReplacerLocal(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                                     <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                                     <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl)</pre>
<div class="block">Populates the VarSetReplacer with replacement rules of the form:
 X -> X_p[idx][idx].</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>vars</code> - </dd>
<dd><code>idx</code> - </dd>
<dd><code>vrepl</code> - </dd>
</dl>
</li>
</ul>
<a name="populateVarReplacer-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.parallelEncoder.VarSetReplacer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateVarReplacer</h4>
<pre>public&nbsp;void&nbsp;populateVarReplacer(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                                <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                                <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl)</pre>
<div class="block">Populates the VarSetReplacer with replacement rules of the form:
 X -> X_p[idx].</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>vars</code> - </dd>
<dd><code>idx</code> - </dd>
<dd><code>vrepl</code> - </dd>
</dl>
</li>
</ul>
<a name="condForNode-sketch.compiler.controlflow.CFG-sketch.compiler.controlflow.CFGNode-sketch.compiler.ast.core.exprs.Expression-sketch.compiler.ast.core.exprs.ExprVar-sketch.compiler.parallelEncoder.VarSetReplacer-sketch.compiler.parallelEncoder.ProduceParallelModel.EliminateLockUnlock-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>condForNode</h4>
<pre>public&nbsp;void&nbsp;condForNode(<a href="../../../sketch/compiler/controlflow/CFG.html" title="class in sketch.compiler.controlflow">CFG</a>&nbsp;cfg,
                        <a href="../../../sketch/compiler/controlflow/CFGNode.html" title="class in sketch.compiler.controlflow">CFGNode</a>&nbsp;node,
                        <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                        <a href="../../../sketch/compiler/ast/core/exprs/ExprVar.html" title="class in sketch.compiler.ast.core.exprs">ExprVar</a>&nbsp;pcVar,
                        <a href="../../../sketch/compiler/parallelEncoder/VarSetReplacer.html" title="class in sketch.compiler.parallelEncoder">VarSetReplacer</a>&nbsp;vrepl,
                        <a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.EliminateLockUnlock.html" title="class in sketch.compiler.parallelEncoder">ProduceParallelModel.EliminateLockUnlock</a>&nbsp;luelim,
                        java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&gt;&nbsp;conditCF)</pre>
<div class="block">Produces an AST node of the form:
                if(pc[idx] == 0){
                cfg[0] ( globals -> globals'[i], locals -> locals'[i])
                pc_p[idx][idx] = next;
        }
    Or
        if(locals[i].pc != ENDPC){
        done = false;
      }else{
        invalidSchedule[i] = 1;
      }</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>node</code> - </dd>
<dd><code>nodeID</code> - </dd>
<dd><code>pcVar</code> - </dd>
<dd><code>vrepl</code> - </dd>
<dd><code>conditCF</code> - </dd>
</dl>
</li>
</ul>
<a name="indexedAssignments-java.util.Iterator-sketch.compiler.ast.core.exprs.Expression-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexedAssignments</h4>
<pre>public&nbsp;void&nbsp;indexedAssignments(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;vars,
                               <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;idx,
                               java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/Statement.html" title="class in sketch.compiler.ast.core.stmts">Statement</a>&gt;&nbsp;pAssign)</pre>
<div class="block">Get as input a collection of variables, and produce as et of assignemtns of the form:

 X_p[idx] = X; where X is a variable in the vars collection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>vars</code> - </dd>
<dd><code>idx</code> - </dd>
<dd><code>pAssign</code> - </dd>
</dl>
</li>
</ul>
<a name="declArrFromScalars-java.util.Iterator-java.util.List-sketch.compiler.ast.core.exprs.Expression-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>declArrFromScalars</h4>
<pre>public&nbsp;void&nbsp;declArrFromScalars(java.util.Iterator&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;original,
                               java.util.List&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;pDecl,
                               <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads)</pre>
<div class="block">The input collection contains variable declarations, and the output collection contains variable' declarations such that
 if T X; is a declaration in the original list, T[NTHREADS] X_p will be a declaration in the output list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>original</code> - input list</dd>
<dd><code>pDecl</code> - output list</dd>
<dd><code>nthreads</code> - number of threads.</dd>
</dl>
</li>
</ul>
<a name="vectorizeLocals-java.util.Set-sketch.compiler.ast.core.exprs.Expression-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>vectorizeLocals</h4>
<pre>public&nbsp;void&nbsp;vectorizeLocals(java.util.Set&lt;<a href="../../../sketch/compiler/ast/core/stmts/StmtVarDecl.html" title="class in sketch.compiler.ast.core.stmts">StmtVarDecl</a>&gt;&nbsp;locals,
                            <a href="../../../sketch/compiler/ast/core/exprs/Expression.html" title="class in sketch.compiler.ast.core.exprs">Expression</a>&nbsp;nthreads)</pre>
</li>
</ul>
<a name="produceParallelModel-sketch.compiler.ast.core.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>produceParallelModel</h4>
<pre>public&nbsp;<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;produceParallelModel(<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;fun)</pre>
</li>
</ul>
<a name="visitFunction-sketch.compiler.ast.core.Function-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>visitFunction</h4>
<pre>public&nbsp;java.lang.Object&nbsp;visitFunction(<a href="../../../sketch/compiler/ast/core/Function.html" title="class in sketch.compiler.ast.core">Function</a>&nbsp;func)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../sketch/compiler/ast/core/FEVisitor.html#visitFunction-sketch.compiler.ast.core.Function-">visitFunction</a></code>&nbsp;in interface&nbsp;<code><a href="../../../sketch/compiler/ast/core/FEVisitor.html" title="interface in sketch.compiler.ast.core">FEVisitor</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../sketch/compiler/ast/core/FEReplacer.html#visitFunction-sketch.compiler.ast.core.Function-">visitFunction</a></code>&nbsp;in class&nbsp;<code><a href="../../../sketch/compiler/ast/core/FEReplacer.html" title="class in sketch.compiler.ast.core">FEReplacer</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ProduceParallelModel.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../sketch/compiler/parallelEncoder/ParallelPreprocessor.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../sketch/compiler/parallelEncoder/ProduceParallelModel.EliminateLockUnlock.html" title="class in sketch.compiler.parallelEncoder"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?sketch/compiler/parallelEncoder/ProduceParallelModel.html" target="_top">Frames</a></li>
<li><a href="ProduceParallelModel.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.sketch.compiler.ast.core.FEReplacer">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
